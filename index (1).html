<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Toko Cerpen Premium ‚Äî Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#0f172a; --bg2:#0b1220; --card:#0b1228; --accent:#ffd400; --muted:#9aa4b2;
  --light-bg:#f6f8fb; --light-card:#ffffff; --text-dark:#0b1220;
}
*{box-sizing:border-box}
body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,var(--bg1),var(--bg2));color:white;min-height:100vh;}
.container{width:94%;max-width:1100px;margin:30px auto;}
header{padding:36px 20px;text-align:center;}
h1{margin:0;font-size:clamp(20px,4vw,36px);letter-spacing:0.5px}
.lead{color:var(--muted);margin-top:8px;font-weight:300}
nav{display:flex;gap:12px;justify-content:center;background:rgba(255,255,255,0.03);padding:10px;border-radius:12px;backdrop-filter:blur(6px)}
nav a{color:inherit;text-decoration:none;padding:6px 10px;border-radius:8px}
.controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:18px 0}
.searchbox{display:flex;gap:8px;align-items:center;background:rgba(255,255,255,0.04);padding:8px;border-radius:10px}
.searchbox input{background:transparent;border:0;color:inherit;outline:none;padding:6px;width:220px}
.toggle{display:flex;gap:8px;align-items:center}
.btn{background:var(--accent);color:#000;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:600;display:inline-block;cursor:pointer;transition:0.18s;box-shadow:0 6px 18px rgba(0,0,0,0.25)}
.btn:active{transform:scale(.98)}
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;margin-top:18px}
.card{background:rgba(255,255,255,0.06);padding:12px;border-radius:12px;backdrop-filter:blur(6px);box-shadow:0 8px 24px rgba(0,0,0,0.35);transform:translateY(0);transition:transform .35s,box-shadow .35s}
.card:hover{transform:translateY(-10px);box-shadow:0 18px 36px rgba(0,0,0,0.45)}
.card img{width:100%;height:160px;object-fit:cover;border-radius:8px}
.card h3{margin:10px 0 6px}
.meta{display:flex;gap:10px;align-items:center;font-size:13px;color:var(--muted)}
.actions{display:flex;gap:8px;margin-top:10px;align-items:center}
.like{display:inline-flex;gap:8px;align-items:center;background:rgba(255,255,255,0.04);padding:6px 10px;border-radius:999px;cursor:pointer}
.cart{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px;border-radius:8px;cursor:pointer;color:var(--accent)}
.badge{background:var(--accent);color:#000;padding:4px 8px;border-radius:999px;font-weight:700}
.dark{background:var(--light-bg);color:var(--text-dark)}
.light-card{background:var(--light-card);color:var(--text-dark);box-shadow:0 6px 18px rgba(0,0,0,0.06)}
.footer{margin:30px 0;text-align:center;color:var(--muted)}
.side-panel{position:fixed;right:18px;bottom:18px;background:rgba(0,0,0,0.5);padding:10px;border-radius:12px;backdrop-filter:blur(6px)}
.small{font-size:13px;color:var(--muted)}
/* modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;visibility:hidden;opacity:0;transition:opacity .2s}
.modal.show{visibility:visible;opacity:1}
.modal .panel{background:white;color:#000;padding:18px;border-radius:12px;width:92%;max-width:520px;box-shadow:0 12px 36px rgba(0,0,0,0.25)}
.input,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e8eb;margin-top:8px;font-family:inherit}
.row{display:flex;gap:8px}
.flex{display:flex;gap:8px;align-items:center}
.promo{position:fixed;left:50%;transform:translateX(-50%);bottom:22px;background:linear-gradient(90deg,#ffd400,#ffab00);color:#000;padding:12px 20px;border-radius:999px;box-shadow:0 8px 22px rgba(0,0,0,0.25);display:flex;gap:10px;align-items:center;cursor:pointer}
/* carousel basic */
.carousel{position:relative;overflow:hidden;border-radius:10px}
.carousel-track{display:flex;transition:transform .5s}
.carousel button{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.4);border:0;color:white;padding:8px;border-radius:50%}
.carousel .prev{left:8px}
.carousel .next{right:8px}
/* particles canvas */
#particles{position:fixed;inset:0;pointer-events:none;z-index:0}

/* responsive tweaks */
@media (max-width:520px){
  .searchbox input{width:120px}
  .card img{height:140px}
}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<header>
  <h1>Toko Cerpen Premium</h1>
  <div class="lead">Beli cerpen orisinal, pembayaran otomatis, langsung download.</div>
</header>

<div class="container" id="app">
  <nav>
    <a href="#cerpen">Cerpen</a>
    <a href="#download">Download</a>
    <a href="#request">Request</a>
  </nav>

  <div class="controls">
    <div class="searchbox">
      üîé <input id="search" placeholder="Cari cerpen... (judul, kata kunci)" />
    </div>

    <div class="toggle">
      <label class="small">Kategori</label>
      <select id="category">
        <option value="all">Semua</option>
      </select>
    </div>

    <div class="flex">
      <button class="btn" id="cartBtn">Keranjang <span id="cartCount" class="badge">0</span></button>
    </div>

    <div style="margin-left:auto;display:flex;gap:8px">
      <button class="btn" id="darkToggle">Mode Gelap/Terang</button>
      <button class="btn" id="musicToggle">Play Musik</button>
    </div>
  </div>

  <section id="cerpen">
    <h2 style="text-align:center;margin-top:6px">Daftar Cerpen</h2>
    <div class="carousel" style="margin:12px 0">
      <div class="carousel-track" id="carouselTrack"></div>
      <button class="prev" id="prevBtn">&#10094;</button>
      <button class="next" id="nextBtn">&#10095;</button>
    </div>

    <div class="card-grid" id="list"></div>
  </section>

  <section id="download" style="margin-top:28px">
    <h2 style="text-align:center">Halaman Download</h2>
    <div class="card light-card">
      <p>Setelah pembayaran berhasil, file akan tersedia di link download.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <a id="downloadLink" class="btn" href="#" download>‚¨á Download Cerpen</a>
        <button class="btn" id="qrisBtn">Tampilkan QRIS</button>
        <a id="whatsappBuy" class="btn" href="#" target="_blank">Beli via WhatsApp</a>
      </div>
    </div>
  </section>

  <section id="request" style="margin-top:28px">
    <h2 style="text-align:center">Request Cerpen Khusus</h2>
    <div class="card light-card">
      <p>Ingin cerpen custom? Isi form di bawah, kami akan hubungi via WhatsApp.</p>
      <input id="reqName" class="input" placeholder="Nama" />
      <input id="reqEmail" class="input" placeholder="Email (opsional)" />
      <textarea id="reqDesc" class="input" placeholder="Deskripsi cerpen yang diinginkan" rows="4"></textarea>
      <div style="margin-top:8px;display:flex;gap:8px">
        <button class="btn" id="reqSubmit">Kirim Request</button>
      </div>
    </div>
  </section>

  <div class="footer">¬© Toko Cerpen ‚Äî Demo. Semua fitur simpan lokal (demo).</div>
</div>

<!-- side cart panel -->
<div class="side-panel" id="sidePanel">
  <div style="display:flex;gap:8px;align-items:center">
    <strong>Keranjang</strong>
    <div style="margin-left:10px" id="miniTotal" class="small">0 item</div>
  </div>
  <div style="margin-top:10px">
    <div id="cartItems" style="max-height:220px;overflow:auto"></div>
    <div style="margin-top:8px;display:flex;gap:8px">
      <button class="btn" id="checkoutBtn">Checkout Otomatis</button>
      <button class="btn" id="clearCart">Kosongkan</button>
    </div>
  </div>
</div>

<!-- promo popup -->
<div id="promo" class="promo" style="display:none">
  üéâ Diskon 10% ‚Äî Pakai kode: CERPEN10 <button id="closePromo" style="margin-left:8px;padding:6px 10px;border-radius:8px;border:0;cursor:pointer">Tutup</button>
</div>

<!-- modal: comments / qris -->
<div id="modal" class="modal"><div class="panel" id="modalPanel"></div></div>

<script>
// --- data sample (you can replace images in repo: cerpen1.jpg, cerpen2.jpg, cerpen3.jpg) ---
const data = [
  {id:1,title:"Senja di Pelabuhan",cat:"Romantis",img:"cerpen1.jpg",desc:"Cerita tentang perpisahan dan harapan.",price:15000},
  {id:2,title:"Bayangan Kota",cat:"Drama",img:"cerpen2.jpg",desc:"Kisah pelarian dan penebusan.",price:20000},
  {id:3,title:"Pohon Kenangan",cat:"Nostalgia",img:"cerpen3.jpg",desc:"Memori masa kecil yang hilang.",price:12000},
  {id:4,title:"Langit Merah",cat:"Drama",img:"cerpen4.jpg",desc:"Konflik keluarga dan pengorbanan.",price:18000},
  {id:5,title:"Sepucuk Surat",cat:"Romantis",img:"cerpen5.jpg",desc:"Surat yang membuka rahasia.",price:17000}
];

// init localStorage helpers
const ls = {
  get(k,def){try{return JSON.parse(localStorage.getItem(k))||def}catch(e){return def}},
  set(k,v){localStorage.setItem(k,JSON.stringify(v))}
};

// UI refs
const listEl=document.getElementById('list');
const search=document.getElementById('search');
const category=document.getElementById('category');
const cartCount=document.getElementById('cartCount');
const cartItems=document.getElementById('cartItems');
const miniTotal=document.getElementById('miniTotal');
const downloadLink=document.getElementById('downloadLink');
const qrisBtn=document.getElementById('qrisBtn');
const whatsappBuy=document.getElementById('whatsappBuy');
const carouselTrack=document.getElementById('carouselTrack');
const prevBtn=document.getElementById('prevBtn'), nextBtn=document.getElementById('nextBtn');

// --- build category options
const cats=['all',...Array.from(new Set(data.map(d=>d.cat)))];
cats.forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c==='all'?'Semua':c;category.appendChild(o)});

// --- render functions
function renderList(filterText='',filterCat='all'){
  listEl.innerHTML=''; let visible=[];
  data.forEach(d=>{
    if(filterCat!=='all' && d.cat!==filterCat) return;
    if(filterText && !(`${d.title} ${d.desc}`.toLowerCase().includes(filterText.toLowerCase()))) return;
    visible.push(d);
    const card=document.createElement('div');card.className='card';
    card.innerHTML=`
      <img src="${d.img}" alt="${d.title}" onerror="this.src='https://via.placeholder.com/600x400?text=No+Image'">
      <h3>${d.title}</h3>
      <div class="meta">${d.cat} ‚Ä¢ Rp ${d.price.toLocaleString()}</div>
      <p style="color:var(--muted)">${d.desc}</p>
      <div class="actions">
        <div class="like" data-id="${d.id}">‚ù§Ô∏è <span class="likes">${getLikes(d.id)}</span></div>
        <button class="cart" data-id="${d.id}">Tambah ke keranjang</button>
        <a class="btn" href="#" data-id="${d.id}" data-buy>üõí Beli Sekarang</a>
      </div>
    `;
    listEl.appendChild(card);
  });
  // attach actions
  document.querySelectorAll('.like').forEach(el=>el.onclick=()=>{const id=+el.dataset.id; toggleLike(id); el.querySelector('.likes').textContent=getLikes(id)});
  document.querySelectorAll('.cart').forEach(el=>el.onclick=()=>{addToCart(+el.dataset.id)});
  document.querySelectorAll('[data-buy]').forEach(el=>el.onclick=(e)=>{e.preventDefault(); startCheckout(+el.dataset.id)});
  // reveal animation
  document.querySelectorAll('.card').forEach((c,i)=>{c.style.opacity=0;c.style.transform='translateY(20px)';setTimeout(()=>{c.style.transition='all .6s';c.style.opacity=1;c.style.transform='translateY(0)';},i*80)});
  renderCarousel();
}

function renderCarousel(){
  carouselTrack.innerHTML='';
  const items = data.slice(0,4);
  items.forEach(d=>{
    const el=document.createElement('div');el.style.minWidth='300px';el.style.marginRight='12px';
    el.innerHTML=`<div style="background:linear-gradient(135deg,rgba(255,255,255,0.03),rgba(255,255,255,0.06));padding:12px;border-radius:12px">
      <img src="${d.img}" style="height:160px;object-fit:cover;border-radius:8px" onerror="this.src='https://via.placeholder.com/600x400?text=No+Image'">
      <h3 style="color:white">${d.title}</h3>
      <p style="color:var(--muted)">${d.desc}</p>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" data-buy="${d.id}">Beli</button>
      </div>
    </div>`; carouselTrack.appendChild(el);
  });
  // buy buttons in carousel
  carouselTrack.querySelectorAll('[data-buy]').forEach(b=>b.onclick=()=>startCheckout(+b.dataset.buy));
}

// likes
function getLikes(id){const L=ls.get('likes',{});return L[id]||0}
function toggleLike(id){const L=ls.get('likes',{});L[id]= (L[id]||0)+1; ls.set('likes',L); showToast('Terima kasih, kamu menyukai cerpen ini!'); updateRecommendations();}

// cart
function getCart(){return ls.get('cart',[])}
function addToCart(id){let cart=getCart(); const item=data.find(d=>d.id===id); const found=cart.find(c=>c.id===id); if(found){found.qty++;}else{cart.push({id:item.id,title:item.title,price:item.price,qty:1})} ls.set('cart',cart); updateCartUI(); showToast('Ditambahkan ke keranjang')}
function updateCartUI(){const cart=getCart(); cartCount.textContent=cart.reduce((s,i)=>s+i.qty,0); cartItems.innerHTML=''; if(cart.length===0){cartItems.innerHTML='<div class="small">Keranjang kosong</div>'} else {cart.forEach(c=>{const el=document.createElement('div');el.style.padding='8px 0';el.innerHTML=`<div style="display:flex;justify-content:space-between"><div>${c.title} x ${c.qty}</div><div>Rp ${ (c.price*c.qty).toLocaleString() }</div></div>`; cartItems.appendChild(el)})} miniTotal.textContent=`${cart.reduce((s,i)=>s+i.qty,0)} item`}
function clearCart(){ls.set('cart',[]);updateCartUI(); showToast('Keranjang dikosongkan')}

// checkout (simulate payment redirect to Payhip/Gumroad or QRIS)
function startCheckout(itemId){const item = data.find(d=>d.id===itemId); // for demo, we redirect to payhip link with item name
const link = `https://payhip.com/checkout?product=${encodeURIComponent(item.title)}`; // placeholder
window.open(link,'_blank'); showToast('Dialihkan ke halaman pembayaran (demo)')}

// QRIS (display modal with sample QR image)
qrisBtn.onclick=()=>{showModal(`<h3>QRIS Pembayaran</h3><p>Scan untuk bayar demo (nominal akan sesuai checkout).</p><img src="https://via.placeholder.com/300x300?text=QRIS+Demo" style="width:100%;max-width:300px;border-radius:8px">`)}

// whatsapp buy
whatsappBuy.onclick=(e)=>{e.preventDefault(); const text=encodeURIComponent('Halo, saya mau beli cerpen. Info lebih lanjut.'); const url=`https://wa.me/6281234567890?text=${text}`; window.open(url,'_blank')}

// search + category events
search.oninput=()=>renderList(search.value,category.value);
category.onchange=()=>renderList(search.value,category.value);

// cart actions
document.getElementById('cartBtn').onclick=()=>{document.getElementById('sidePanel').style.display='block'; updateCartUI();}
document.getElementById('clearCart').onclick=clearCart;
document.getElementById('checkoutBtn').onclick=()=>{ // for demo redirect to payhip cart
  const cart=getCart(); if(cart.length===0){showToast('Keranjang kosong'); return;}
  const names = cart.map(c=>c.title).join(', '); window.open(`https://payhip.com/checkout?products=${encodeURIComponent(names)}`,'_blank'); showToast('Menuju checkout (demo)'); clearCart();
}

// download link (demo)
downloadLink.onclick=(e)=>{e.preventDefault(); showToast('Link download akan muncul setelah pembayaran (demo)');}

// request form
document.getElementById('reqSubmit').onclick=()=>{
  const n=document.getElementById('reqName').value.trim(); const d=document.getElementById('reqDesc').value.trim();
  if(!n||!d){showToast('Mohon isi nama dan deskripsi request');return;}
  const wa = `https://wa.me/6281234567890?text=${encodeURIComponent('Request cerpen dari: '+n+'%0ADeskripsi:%0A'+d)}`;
  window.open(wa,'_blank'); showToast('Permintaan dikirim via WhatsApp (demo)');
}

// likes-based simple recommendations
function updateRecommendations(){
  const likes=ls.get('likes',{}); // pick top liked id else random
  let recommended = data.slice().sort((a,b)=> (likes[b.id]||0)-(likes[a.id]||0)).slice(0,3);
  // show tiny recommended toast
  if(recommended.length) console.log('Rekomendasi:',recommended.map(r=>r.title));
}

// toast
function showToast(t){const el=document.createElement('div');el.textContent=t;el.style.position='fixed';el.style.left='50%';el.style.transform='translateX(-50%)';el.style.bottom='90px';el.style.background='rgba(0,0,0,0.7)';el.style.color='white';el.style.padding='10px 14px';el.style.borderRadius='10px';document.body.appendChild(el);setTimeout(()=>{el.style.transition='opacity .4s';el.style.opacity=0;setTimeout(()=>el.remove(),400)},2000)}

// likes init
document.addEventListener('DOMContentLoaded',()=>{renderList(); updateCartUI(); maybeShowPromo(); startParticles(); initMusic(); initCarousel();})

// promo popup logic
function maybeShowPromo(){if(!ls.get('promoSeen',false)){document.getElementById('promo').style.display='flex'; ls.set('promoSeen',true)}}
document.getElementById('closePromo').onclick=()=>document.getElementById('promo').style.display='none';

// modal
function showModal(html){const m=document.getElementById('modal');document.getElementById('modalPanel').innerHTML=html; m.classList.add('show')}
document.getElementById('modal').onclick=(e)=>{if(e.target.id==='modal'){document.getElementById('modal').classList.remove('show')}}

// dark mode toggle (switch classes and store preference)
const darkToggle=document.getElementById('darkToggle');
function applyTheme(light){
  if(light){document.body.classList.add('dark'); document.querySelectorAll('.card').forEach(c=>c.classList.add('light-card'));}
  else{document.body.classList.remove('dark'); document.querySelectorAll('.card').forEach(c=>c.classList.remove('light-card'));}
}
darkToggle.onclick=()=>{const cur=ls.get('lightMode',false); ls.set('lightMode',!cur); applyTheme(!cur)}
applyTheme(ls.get('lightMode',false));

// background music
let music, playing=false;
function initMusic(){
  music=new Audio('https://cdn.pixabay.com/download/audio/2022/03/15/audio_1b1b3b8b55.mp3?filename=calm-background-11203.mp3');
  music.loop=true;
  document.getElementById('musicToggle').onclick=()=>{if(playing){music.pause();playing=false;document.getElementById('musicToggle').textContent='Play Musik'}else{music.play();playing=true;document.getElementById('musicToggle').textContent='Pause Musik'}};
}

// particles (simple moving dots)
function startParticles(){
  const canvas=document.getElementById('particles'); const ctx=canvas.getContext('2d');
  let w=canvas.width=innerWidth, h=canvas.height=innerHeight;
  window.addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight;})
  const pts=[]; for(let i=0;i<60;i++){pts.push({x:Math.random()*w,y:Math.random()*h,r:Math.random()*1.6+0.4,vx:(Math.random()-.5)*0.4,vy:(Math.random()-.5)*0.4})}
  function frame(){ctx.clearRect(0,0,w,h); pts.forEach(p=>{p.x+=p.vx;p.y+=p.vy; if(p.x<0)p.x=w;if(p.x>w)p.x=0; if(p.y<0)p.y=h;if(p.y>h)p.y=0; ctx.beginPath(); ctx.fillStyle='rgba(255,255,255,0.06)'; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill()}); requestAnimationFrame(frame)}
  frame();
}

// simple carousel
let carouselIndex=0;
function initCarousel(){
  const track=document.getElementById('carouselTrack');
  prevBtn.onclick=()=>{carouselIndex=Math.max(0,--carouselIndex); updateCarousel();}
  nextBtn.onclick=()=>{carouselIndex=Math.min(track.children.length-1,++carouselIndex); updateCarousel();}
  updateCarousel();
}
function updateCarousel(){const track=document.getElementById('carouselTrack'); const w=track.children[0]?.offsetWidth||300; track.style.transform=`translateX(-${carouselIndex*(w+12)}px)`}

// small search debounce
let sd; search.addEventListener('input',()=>{clearTimeout(sd); sd=setTimeout(()=>renderList(search.value,category.value),250)});

// simple recommendations based on likes
function getRecommendations(){ const likes=ls.get('likes',{}); return data.slice().sort((a,b)=> (likes[b.id]||0)-(likes[a.id]||0)).slice(0,3) }

// expose some helpers to console for demo
window.__demo={data,ls,getRecommendations};

// save uploaded images note: the user should upload cerpen1.jpg..cerpen5.jpg to repo to show real images
</script>
</body>
</html>
